{% extends('ensemble01filemakerBundle::BSpageBaseFilemaker.html.twig') %}
{% block h1 %}
	<h1 class="page-header">{{ h1 }}</h1>
	{% if rapports is iterable %}
	<small>{{ rapports|length }} résultat(s) <span class="caret"></span></small>
	{% else %}
	<small>Données nulles <span class="caret"></span></small>
	{% endif %}
{% endblock h1 %}
{% block body %}
	<div class="col-lg-12">
		{% if rapports is iterable %}
		<table class="table table-bordered table-hover table-condensed">
			<thead>
				<tr class="active">
					<th>Réf. lot</th>
					<th>Type / Actions</th>
					<th>Nombre de rapports</th>
				</tr>
			</thead>
			<tbody>
				{% for numlot,data in rapports %}
				<tr>
					<td>{{ numlot }}</td>
					<td><a href="{{ url('ensemble01filemaker_generateByLotRapport', {numlot: numlot, pagedata: {redirect: page}|json_encode() }) }}" type="button" class="btn btn-default btn-xs">Traiter rapports</a></td>
					<td>{{ data.nb }}</td>
				</tr>
				{%- endfor %}
			</tbody>
		</table>
		{% else %}
		<!-- Message d'erreur -->
		{% include 'ensemble01filemakerBundle:errors:erreur-message.html.twig' with {message: rapports} %}
		{% endif %}
	</div>
{% endblock body %}